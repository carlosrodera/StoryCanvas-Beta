<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Cuenta - StoryCanvas</title>
    <link rel="stylesheet" href="../frontend/css/output.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Nunito:wght@400;600;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="icon" href="../frontend/assets/icons/favicon.ico" type="image/x-icon">
    <!-- Estilos adicionales para forzar colores específicos -->
    <style>
        /* Forzar color blanco para el logo del portal */
        .portal-logo-link,
        .portal-logo-link:link,
        .portal-logo-link:visited,
        .portal-logo-link:hover,
        .portal-logo-link:active {
            color: #FFFFFF !important;
            text-decoration: none !important;
        }
    </style>
    <script>
        // Protección de la página
        if (sessionStorage.getItem('isLoggedIn') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>
</head>
<body class="bg-light font-body text-dark">
    <!-- Header -->
    <header class="bg-secondary text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="text-2xl font-heading">
                <a href="dashboard.html" class="portal-logo-link">PORTAL STORYCANVAS</a> <!-- Color blanco forzado -->
            </div>
            <div>
                <span class="mr-4 font-body hidden sm:inline">Bienvenido, test@test.com</span>
                <button id="logout-button" class="btn-primary !bg-red-500 !py-2 !px-4 !text-lg">SALIR</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="flex items-center mb-6">
            <a href="dashboard.html" class="text-secondary hover:text-primary mr-4">← Volver al panel</a>
            <h1 class="font-heading text-4xl text-primary">MI CUENTA</h1>
        </div>

        <!-- Pestañas de configuración -->
        <div class="mb-8">
            <div class="flex flex-wrap border-b border-gray-300">
                <button class="px-6 py-2 border-b-2 border-primary font-semibold" id="tab-info">Información personal</button>
                <button class="px-6 py-2 border-b-2 border-transparent" id="tab-facturacion">Facturación</button>
                <button class="px-6 py-2 border-b-2 border-transparent" id="tab-seguridad">Seguridad</button>
                <button class="px-6 py-2 border-b-2 border-transparent" id="tab-preferencias">Preferencias</button>
            </div>
        </div>

        <!-- Contenido de la pestaña: Información personal -->
        <div id="content-info" class="comic-panel bg-panel1">
            <h2 class="font-heading text-2xl text-secondary mb-6">Información personal</h2>
            
            <form id="form-info-personal">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block font-body font-semibold mb-1">Nombre</label>
                        <input type="text" value="Usuario" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">Apellidos</label>
                        <input type="text" value="De Prueba" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">Email</label>
                        <input type="email" value="test@test.com" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">Teléfono</label>
                        <input type="tel" value="600123456" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block font-body font-semibold mb-1">Empresa/Organización</label>
                        <input type="text" value="Mi Empresa SL" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block font-body font-semibold mb-1">Dirección</label>
                        <textarea class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary" rows="3">Calle de Ejemplo, 123
28001 Madrid, España</textarea>
                    </div>
                </div>

                <div class="mt-6 text-center">
                    <button type="submit" class="btn-primary">Guardar cambios</button>
                </div>
            </form>
        </div>

        <!-- Contenido de la pestaña: Facturación (inicialmente oculto) -->
        <div id="content-facturacion" class="hidden comic-panel bg-panel1">
            <h2 class="font-heading text-2xl text-secondary mb-6">Datos de facturación</h2>
            
            <form id="form-facturacion">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block font-body font-semibold mb-1">Nombre fiscal</label>
                        <input type="text" value="Mi Empresa SL" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">CIF/NIF</label>
                        <input type="text" value="B12345678" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block font-body font-semibold mb-1">Dirección fiscal</label>
                        <textarea class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary" rows="3">Calle de Ejemplo, 123
28001 Madrid, España</textarea>
                    </div>
                </div>

                <h3 class="font-heading text-xl text-secondary mt-8 mb-4">Método de pago actual</h3>
                <div class="bg-white p-4 rounded-lg border-2 border-dark mb-6">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <div class="w-12 h-8 bg-blue-500 rounded mr-3 flex items-center justify-center text-white font-bold">VISA</div>
                            <div>
                                <p class="font-semibold">Tarjeta Visa terminada en 4567</p>
                                <p class="text-sm text-gray-600">Expira: 06/2027</p>
                            </div>
                        </div>
                        <button class="text-primary hover:underline">Cambiar</button>
                    </div>
                </div>

                <h3 class="font-heading text-xl text-secondary mt-8 mb-4">Facturas recientes</h3>
                <div class="border-2 border-dark rounded-lg overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-secondary text-white">
                            <tr>
                                <th class="py-2 px-4 text-left">Fecha</th>
                                <th class="py-2 px-4 text-left">Número</th>
                                <th class="py-2 px-4 text-left">Importe</th>
                                <th class="py-2 px-4 text-left">Estado</th>
                                <th class="py-2 px-4 text-left">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-gray-200">
                                <td class="py-3 px-4">15/03/2025</td>
                                <td class="py-3 px-4">F-2025-042</td>
                                <td class="py-3 px-4">495,00 €</td>
                                <td class="py-3 px-4"><span class="text-green-600">Pagada</span></td>
                                <td class="py-3 px-4"><button class="text-primary hover:underline">Descargar</button></td>
                            </tr>
                            <tr class="border-b border-gray-200">
                                <td class="py-3 px-4">15/02/2025</td>
                                <td class="py-3 px-4">F-2025-031</td>
                                <td class="py-3 px-4">495,00 €</td>
                                <td class="py-3 px-4"><span class="text-green-600">Pagada</span></td>
                                <td class="py-3 px-4"><button class="text-primary hover:underline">Descargar</button></td>
                            </tr>
                            <tr>
                                <td class="py-3 px-4">15/01/2025</td>
                                <td class="py-3 px-4">F-2025-017</td>
                                <td class="py-3 px-4">495,00 €</td>
                                <td class="py-3 px-4"><span class="text-green-600">Pagada</span></td>
                                <td class="py-3 px-4"><button class="text-primary hover:underline">Descargar</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="mt-6 text-center">
                    <button type="submit" class="btn-primary">Guardar cambios</button>
                </div>
            </form>
        </div>

        <!-- Contenido de la pestaña: Seguridad (inicialmente oculto) -->
        <div id="content-seguridad" class="hidden comic-panel bg-panel1">
            <h2 class="font-heading text-2xl text-secondary mb-6">Seguridad de la cuenta</h2>
            
            <form id="form-seguridad">
                <h3 class="font-heading text-xl text-secondary mb-4">Cambiar contraseña</h3>
                <div class="space-y-4 max-w-md">
                    <div>
                        <label class="block font-body font-semibold mb-1">Contraseña actual</label>
                        <input type="password" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">Nueva contraseña</label>
                        <input type="password" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">Confirmar nueva contraseña</label>
                        <input type="password" class="w-full px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                    </div>
                </div>

                <h3 class="font-heading text-xl text-secondary mt-8 mb-4">Sesiones activas</h3>
                <div class="bg-white p-4 rounded-lg border-2 border-dark mb-6">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-semibold">Sesión actual (Chrome en macOS)</p>
                            <p class="text-sm text-gray-600">Última actividad: Hace 2 minutos</p>
                        </div>
                        <span class="bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded">Activa</span>
                    </div>
                </div>

                <div class="mt-6 text-center">
                    <button type="submit" class="btn-primary">Actualizar seguridad</button>
                    <button type="button" class="btn-secondary !bg-red-500 ml-4">Cerrar todas las sesiones</button>
                </div>
            </form>
        </div>

        <!-- Contenido de la pestaña: Preferencias (inicialmente oculto) -->
        <div id="content-preferencias" class="hidden comic-panel bg-panel1">
            <h2 class="font-heading text-2xl text-secondary mb-6">Preferencias</h2>
            
            <form id="form-preferencias">
                <h3 class="font-heading text-xl text-secondary mb-4">Notificaciones</h3>
                <div class="space-y-4">
                    <div class="flex items-center">
                        <input type="checkbox" id="notif-updates" checked class="w-5 h-5 mr-2">
                        <label for="notif-updates" class="font-body">Actualizaciones de pedidos</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="notif-news" checked class="w-5 h-5 mr-2">
                        <label for="notif-news" class="font-body">Novedades y promociones</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="notif-tips" class="w-5 h-5 mr-2">
                        <label for="notif-tips" class="font-body">Consejos y tutoriales</label>
                    </div>
                </div>

                <h3 class="font-heading text-xl text-secondary mt-8 mb-4">Personalización</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block font-body font-semibold mb-1">Idioma</label>
                        <select class="w-full md:w-64 px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                            <option value="es" selected>Español</option>
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                        </select>
                    </div>
                    <div>
                        <label class="block font-body font-semibold mb-1">Zona horaria</label>
                        <select class="w-full md:w-64 px-3 py-2 border-2 border-dark rounded focus:outline-none focus:border-primary">
                            <option value="europe-madrid" selected>(GMT+1) Madrid</option>
                            <option value="europe-london">(GMT+0) Londres</option>
                            <option value="america-new_york">(GMT-5) Nueva York</option>
                        </select>
                    </div>
                </div>

                <div class="mt-6 text-center">
                    <button type="submit" class="btn-primary">Guardar preferencias</button>
                </div>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer mt-16">
        <div class="footer-copyright">
            <p>&copy; 2025 StoryCanvas Educativo Portal. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Gestión de pestañas
        const tabs = ['info', 'facturacion', 'seguridad', 'preferencias'];
        
        tabs.forEach(tab => {
            document.getElementById(`tab-${tab}`).addEventListener('click', () => {
                // Ocultar todos los contenidos
                tabs.forEach(t => {
                    document.getElementById(`content-${t}`).classList.add('hidden');
                    document.getElementById(`tab-${t}`).classList.remove('border-primary');
                    document.getElementById(`tab-${t}`).classList.add('border-transparent');
                });
                
                // Mostrar el contenido seleccionado
                document.getElementById(`content-${tab}`).classList.remove('hidden');
                document.getElementById(`tab-${tab}`).classList.remove('border-transparent');
                document.getElementById(`tab-${tab}`).classList.add('border-primary');
            });
        });
        
        // Gestión de formularios
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Cambios guardados correctamente');
            });
        });
        
        // Logout
        const logoutButton = document.getElementById('logout-button');
        logoutButton.addEventListener('click', () => {
            sessionStorage.removeItem('isLoggedIn');
            window.location.href = 'login.html';
        });
    </script>
</body>
</html>